
> gemini-desktop@0.6.0 test:coordinated
> vitest run --config config/vitest/vitest.coordinated.config.ts


[1m[46m RUN [49m[22m [36mv4.0.18 [39m[90m/home/benjamin/repos/gemini-desktop[39m

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon darwin[2m > [22m[2mregisters permission handler on all platforms
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon darwin[2m > [22m[2mgrants media permission to Gemini domains
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon darwin[2m > [22m[2mgrants media permission to Gemini domains
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains
[SecurityManager] Granting media permission to: https://gemini.google.com/app

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon darwin[2m > [22m[2mdenies media permission to non-Google domains
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon darwin[2m > [22m[2mdenies media permission to non-Google domains
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains
[SecurityManager] Denying media permission request from: https://malicious-site.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon win32[2m > [22m[2mregisters permission handler on all platforms
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon win32[2m > [22m[2mregisters permission handler on all platforms
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon win32[2m > [22m[2mgrants media permission to Gemini domains
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains
[SecurityManager] Granting media permission to: https://gemini.google.com/app

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon win32[2m > [22m[2mdenies media permission to non-Google domains
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains
[SecurityManager] Denying media permission request from: https://malicious-site.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon linux[2m > [22m[2mregisters permission handler on all platforms
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon linux[2m > [22m[2mgrants media permission to Gemini domains
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains
[SecurityManager] Granting media permission to: https://gemini.google.com/app

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mPermission Handler Registration[2m > [22m[2mon linux[2m > [22m[2mdenies media permission to non-Google domains
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains
[SecurityManager] Denying media permission request from: https://malicious-site.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://gemini.google.com/app

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://gemini.google.com/chat

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://accounts.google.com/signin

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://google.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] Denying media permission request from: https://example.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] Denying notifications permission request from: https://gemini.google.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon darwin[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] Denying media permission: invalid URL

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] macOS microphone access: granted

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://gemini.google.com/app

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://gemini.google.com/chat

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://accounts.google.com/signin

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://google.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] Denying media permission request from: https://example.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] Denying notifications permission request from: https://gemini.google.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon win32[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] Denying media permission: invalid URL

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://gemini.google.com/app' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://gemini.google.com/app

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://gemini.google.com/chat' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://gemini.google.com/chat

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://accounts.google.com/signin' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://accounts.google.com/signin

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://google.com' ('media') consistently
[22m[39m[SecurityManager] Granting media permission to: https://google.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://example.com' ('media') consistently
[22m[39m[SecurityManager] Denying media permission request from: https://example.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for 'https://gemini.google.com' ('notifications') consistently
[22m[39m[SecurityManager] Denying notifications permission request from: https://gemini.google.com

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] Media permission handler configured for Gemini domains

[90mstdout[2m | tests/coordinated/media-permissions.coordinated.test.ts[2m > [22m[2mMedia Permissions Integration[2m > [22m[2mCross-platform permission consistency[2m > [22m[2mon linux[2m > [22m[2mhandles permission request for '' ('media') consistently
[22m[39m[SecurityManager] Denying media permission: invalid URL

 [32mâœ“[39m tests/coordinated/media-permissions.coordinated.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 426[2mms[22m[39m
[90mstderr[2m | tests/coordinated/network-status-coordination.coordinated.test.ts[2m > [22m[2mNetwork Status Coordination[2m > [22m[2museGeminiIframe â†” useNetworkStatus Coordination[2m > [22m[2mshould propagate offline status at initialization
[22m[39mAn update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act
An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 [32mâœ“[39m tests/coordinated/wayland-hotkey-coordination.coordinated.test.ts [2m([22m[2m20 tests[22m[2m)[22m[33m 536[2mms[22m[39m
       [33m[2mâœ“[22m[39m when detector reports Wayland+KDE, manager attempts registration via portal [33m 426[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/network-status-coordination.coordinated.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 198[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/multi-window-coordination.coordinated.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 148[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/theme-full-roundtrip.coordinated.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[33m 324[2mms[22m[39m
[90mstderr[2m | tests/coordinated/toast-context.coordinated.test.tsx[2m > [22m[2mToastContext â†” ToastContainer Coordination[2m > [22m[2m7.2.1 - showToast adds toast and ToastContainer receives it[2m > [22m[2mshould add a toast to the container when showToast is called
[22m[39mReceived `true` for a non-boolean attribute `layout`.

If you want to write it to the DOM, pass a string instead: layout="true" or layout={value.toString()}.

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould request prediction after typing and display ghost text
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould request prediction after typing and display ghost text
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

 [32mâœ“[39m tests/coordinated/auth-session-coordination.coordinated.test.ts [2m([22m[2m45 tests[22m[2m)[22m[33m 445[2mms[22m[39m
[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould request prediction after typing and display ghost text
[22m[39m[QuickChat] Scheduling prediction request for: Paris

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould request prediction after typing and display ghost text
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould request prediction after typing and display ghost text
[22m[39m[QuickChat] Prediction received:  is the capital of France.

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould not show ghost text when prediction returns null
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould not show ghost text when prediction returns null
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould not show ghost text when prediction returns null
[22m[39m[QuickChat] Scheduling prediction request for: Hello

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould not show ghost text when prediction returns null
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould not show ghost text when prediction returns null
[22m[39m[QuickChat] No prediction returned

 [32mâœ“[39m tests/coordinated/print-manager-menu.coordinated.test.ts [2m([22m[2m24 tests[22m[2m)[22m[32m 276[2mms[22m[39m
[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Scheduling prediction request for: H

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Scheduling prediction request for: He

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Scheduling prediction request for: Hel

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.5 - Predict request triggers ghost text display[2m > [22m[2mshould debounce prediction requests (300ms delay)
[22m[39m[QuickChat] Prediction received:  world

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould append prediction to input when Tab is pressed
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould append prediction to input when Tab is pressed
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould append prediction to input when Tab is pressed
[22m[39m[QuickChat] Scheduling prediction request for: Hello

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould append prediction to input when Tab is pressed
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould append prediction to input when Tab is pressed
[22m[39m[QuickChat] Prediction received:  world!

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould append prediction to input when Tab is pressed
[22m[39m[QuickChat] Tab pressed, accepting prediction:  world!

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould do nothing when Tab pressed with no prediction
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould do nothing when Tab pressed with no prediction
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.6 - Tab key accepts prediction[2m > [22m[2mshould do nothing when Tab pressed with no prediction
[22m[39m[QuickChat] Scheduling prediction request for: Hello

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould clear ghost text when user continues typing
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould clear ghost text when user continues typing
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould clear ghost text when user continues typing
[22m[39m[QuickChat] Scheduling prediction request for: Hello

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould clear ghost text when user continues typing
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould clear ghost text when user continues typing
[22m[39m[QuickChat] Prediction received:  world!

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould clear ghost text when user continues typing
[22m[39m[QuickChat] Scheduling prediction request for: Hello there

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould cancel pending prediction when typing continues
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould cancel pending prediction when typing continues
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould cancel pending prediction when typing continues
[22m[39m[QuickChat] Scheduling prediction request for: Hello

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould cancel pending prediction when typing continues
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.7 - Continued typing dismisses prediction[2m > [22m[2mshould cancel pending prediction when typing continues
[22m[39m[QuickChat] Scheduling prediction request for: Hello world

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction when feature is disabled
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction when feature is disabled
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mfalse[39m, status: [32m'not-downloaded'[39m, isReady: [33mfalse[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction when feature is disabled
[22m[39m[QuickChat] Prediction skipped: { isPredictionEnabled: [33mfalse[39m, isModelReady: [33mfalse[39m, hasContent: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction when model is not ready
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction when model is not ready
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'downloading'[39m, isReady: [33mfalse[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction when model is not ready
[22m[39m[QuickChat] Prediction skipped: { isPredictionEnabled: [33mtrue[39m, isModelReady: [33mfalse[39m, hasContent: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction for empty input
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction for empty input
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

 [32mâœ“[39m tests/coordinated/toast-context.coordinated.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[33m 646[2mms[22m[39m
[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould not request prediction for empty input
[22m[39m[QuickChat] Prediction skipped: { isPredictionEnabled: [33mtrue[39m, isModelReady: [33mtrue[39m, hasContent: [33mfalse[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Loading initial prediction status...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Initial prediction status: { enabled: [33mtrue[39m, status: [32m'ready'[39m, isReady: [33mtrue[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Scheduling prediction request for: Hello

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Requesting prediction from LLM...

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Prediction received:  world!

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Prediction status changed: { enabled: [33mfalse[39m, status: [32m'not-downloaded'[39m, isReady: [33mfalse[39m }

[90mstdout[2m | tests/coordinated/text-prediction-quickchat.coordinated.test.tsx[2m > [22m[2mQuickChatApp Text Prediction Coordination[2m > [22m[2m8.8 - Prediction disabled shows no ghost text[2m > [22m[2mshould stop showing prediction when feature is disabled mid-session
[22m[39m[QuickChat] Prediction skipped: { isPredictionEnabled: [33mfalse[39m, isModelReady: [33mfalse[39m, hasContent: [33mtrue[39m }

 [32mâœ“[39m tests/coordinated/text-prediction-quickchat.coordinated.test.tsx [2m([22m[2m11 tests[22m[2m)[22m[33m 681[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/toast-errors.coordinated.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 678[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/zoom-titlebar.coordinated.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 240[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/update-notification-chain.coordinated.test.ts [2m([22m[2m36 tests[22m[2m)[22m[33m 627[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/zoom-control.coordinated.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 555[2mms[22m[39m
[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2minitial offline state[2m > [22m[2mshows offline overlay when app starts offline
[22m[39m[useUpdateNotifications] Dev mode check: [33mtrue[39m { DEV: [33mtrue[39m, MODE: [32m'test'[39m, hostname: [90mundefined[39m }
[useUpdateNotifications] Creating __testUpdateToast helper

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2minitial offline state[2m > [22m[2mshows offline overlay when app starts offline
[22m[39m[ThemeContext] Theme initialized: { preference: [32m'system'[39m, effectiveTheme: [32m'dark'[39m }

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2minitial offline state[2m > [22m[2mdoes not show offline overlay when app starts online
[22m[39m[useUpdateNotifications] Dev mode check: [33mtrue[39m { DEV: [33mtrue[39m, MODE: [32m'test'[39m, hostname: [90mundefined[39m }
[useUpdateNotifications] Creating __testUpdateToast helper

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2minitial offline state[2m > [22m[2mdoes not show offline overlay when app starts online
[22m[39m[ThemeContext] Theme initialized: { preference: [32m'system'[39m, effectiveTheme: [32m'dark'[39m }

 [32mâœ“[39m tests/coordinated/text-prediction-settings.coordinated.test.tsx [2m([22m[2m30 tests[22m[2m)[22m[33m 2301[2mms[22m[39m
       [33m[2mâœ“[22m[39m should display progress bar fill width matching percentage [33m 581[2mms[22m[39m
[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2moffline to online transition[2m > [22m[2moverlay remains visible until retry is clicked after going online
[22m[39m[useUpdateNotifications] Dev mode check: [33mtrue[39m { DEV: [33mtrue[39m, MODE: [32m'test'[39m, hostname: [90mundefined[39m }
[useUpdateNotifications] Creating __testUpdateToast helper

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2moffline to online transition[2m > [22m[2moverlay remains visible until retry is clicked after going online
[22m[39m[ThemeContext] Theme initialized: { preference: [32m'system'[39m, effectiveTheme: [32m'dark'[39m }

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2monline to offline transition[2m > [22m[2mshows overlay when connection is lost
[22m[39m[useUpdateNotifications] Dev mode check: [33mtrue[39m { DEV: [33mtrue[39m, MODE: [32m'test'[39m, hostname: [90mundefined[39m }
[useUpdateNotifications] Creating __testUpdateToast helper

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2monline to offline transition[2m > [22m[2mshows overlay when connection is lost
[22m[39m[ThemeContext] Theme initialized: { preference: [32m'system'[39m, effectiveTheme: [32m'dark'[39m }

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2mretry functionality[2m > [22m[2mretry button triggers page reload
[22m[39m[useUpdateNotifications] Dev mode check: [33mtrue[39m { DEV: [33mtrue[39m, MODE: [32m'test'[39m, hostname: [90mundefined[39m }
[useUpdateNotifications] Creating __testUpdateToast helper

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2mretry functionality[2m > [22m[2mretry button triggers page reload
[22m[39m[ThemeContext] Theme initialized: { preference: [32m'system'[39m, effectiveTheme: [32m'dark'[39m }

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2mretry functionality[2m > [22m[2mretry button triggers page reload
[22m[39m[useGeminiIframe] Retrying connection - reloading page

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2moverlay UI elements[2m > [22m[2mdisplays all expected UI elements when offline
[22m[39m[useUpdateNotifications] Dev mode check: [33mtrue[39m { DEV: [33mtrue[39m, MODE: [32m'test'[39m, hostname: [90mundefined[39m }
[useUpdateNotifications] Creating __testUpdateToast helper

[90mstdout[2m | tests/coordinated/OfflineMode.test.tsx[2m > [22m[2mOffline Mode Integration[2m > [22m[2moverlay UI elements[2m > [22m[2mdisplays all expected UI elements when offline
[22m[39m[ThemeContext] Theme initialized: { preference: [32m'system'[39m, effectiveTheme: [32m'dark'[39m }

 [32mâœ“[39m tests/coordinated/badge-manager.coordinated.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 231[2mms[22m[39m
[90mstdout[2m | tests/coordinated/hotkey-coordination.coordinated.test.ts[2m > [22m[2mHotkeyManager â†” SettingsStore â†” IpcManager Integration[2m > [22m[2mon darwin[2m > [22m[2mUser disables hotkey via IPC[2m > [22m[2mshould unregister hotkey, persist to store, and broadcast to renderers
[22m[39mTest: calling handler for alwaysOnTop=false
Test: handler called
Test: checking hotkeyManager state
Test: checking mockStore.set calls [ [ [32m'hotkeyAlwaysOnTop'[39m, [33mfalse[39m ] ]

[90mstdout[2m | tests/coordinated/hotkey-coordination.coordinated.test.ts[2m > [22m[2mHotkeyManager â†” SettingsStore â†” IpcManager Integration[2m > [22m[2mon win32[2m > [22m[2mUser disables hotkey via IPC[2m > [22m[2mshould unregister hotkey, persist to store, and broadcast to renderers
[22m[39mTest: calling handler for alwaysOnTop=false
Test: handler called
Test: checking hotkeyManager state
Test: checking mockStore.set calls [ [ [32m'hotkeyAlwaysOnTop'[39m, [33mfalse[39m ] ]

[90mstdout[2m | tests/coordinated/hotkey-coordination.coordinated.test.ts[2m > [22m[2mHotkeyManager â†” SettingsStore â†” IpcManager Integration[2m > [22m[2mon linux[2m > [22m[2mUser disables hotkey via IPC[2m > [22m[2mshould unregister hotkey, persist to store, and broadcast to renderers
[22m[39mTest: calling handler for alwaysOnTop=false
Test: handler called
Test: checking hotkeyManager state
Test: checking mockStore.set calls [ [ [32m'hotkeyAlwaysOnTop'[39m, [33mfalse[39m ] ]

 [32mâœ“[39m tests/coordinated/menu-manager.coordinated.test.ts [2m([22m[2m33 tests[22m[2m)[22m[32m 292[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/hotkey-coordination.coordinated.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 192[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/window-tray-menu-coordination.coordinated.test.ts [2m([22m[2m36 tests[22m[2m)[22m[33m 446[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/navigation-security.coordinated.test.ts [2m([22m[2m21 tests[22m[2m)[22m[32m 189[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/OfflineMode.test.tsx [2m([22m[2m6 tests[22m[2m)[22m[33m 1670[2mms[22m[39m
       [33m[2mâœ“[22m[39m shows offline overlay when app starts offline [33m 360[2mms[22m[39m
       [33m[2mâœ“[22m[39m displays all expected UI elements when offline [33m 906[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc-manager-coordination.coordinated.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 185[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc-roundtrip.coordinated.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 185[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/sandbox-detection.coordinated.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 96[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/settings-persistence.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 84[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/cross-window-sync.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 129[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/quick-chat-injection-flow.coordinated.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 138[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/response-notifications.coordinated.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 232[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/manager-initialization.coordinated.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 224[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/ZoomIpcHandler.coordinated.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/auth-coordination.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 127[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/hotkey-collision-coordination.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 70[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/HotkeyIpcHandler.coordinated.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 86[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/menu-manager-platform.coordinated.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 82[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/ThemeIpcHandler.coordinated.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 61[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/AlwaysOnTopIpcHandler.coordinated.test.ts [2m([22m[2m10 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/main-lifecycle.coordinated.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 60[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/TextPredictionIpcHandler.coordinated.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 66[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/window-visibility-fallback.coordinated.test.ts [2m([22m[2m12 tests[22m[2m)[22m[32m 144[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/update-notification-flow.coordinated.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 36[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/toast-ipc.coordinated.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 63[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/AutoUpdateIpcHandler.coordinated.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 33[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc/QuickChatIpcHandler.coordinated.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 41[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/ipc-sanitization.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 79[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/response-notifications-dispose.coordinated.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/app-lifecycle.coordinated.test.ts [2m([22m[2m2 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/auto-update-restart.coordinated.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 16[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/shutdown-sequence.coordinated.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 32[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/security-headers.coordinated.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 20[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/mainWindow.cleanup.coordinated.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/window-lifecycle.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 46[2mms[22m[39m
 [32mâœ“[39m tests/coordinated/fatal-errors.coordinated.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 14[2mms[22m[39m
[90mstdout[2m | tests/coordinated/update-error.coordinated.test.ts[2m > [22m[2mUpdateManager Error Coordination[2m > [22m[2mshould broadcast masked error to ALL open windows
[22m[39m[UpdateManager] UpdateManager initialized (enabled: true)
[UpdateManager] Periodic update checks started (interval: 21600s)
[UpdateManager] Checking for updates...
[UpdateManager] Lazily loading electron-updater...

[90mstdout[2m | tests/coordinated/update-error.coordinated.test.ts[2m > [22m[2mUpdateManager Error Coordination[2m > [22m[2mshould broadcast masked error to ALL open windows
[22m[39m[UpdateManager] electron-updater loaded and configured

[90mstderr[2m | tests/coordinated/update-error.coordinated.test.ts[2m > [22m[2mUpdateManager Error Coordination[2m > [22m[2mshould broadcast masked error to ALL open windows
[22m[39m[UpdateManager] Auto-updater error: Error: Raw Sensitive Error Data
    at [90m/home/benjamin/repos/gemini-desktop/[39mtests/coordinated/update-error.coordinated.test.ts:69:26
    at [90mfile:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m
    at runTest [90m(file:///home/benjamin/repos/gemini-desktop/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:12[90m)[39m

[90mstdout[2m | tests/coordinated/update-error.coordinated.test.ts[2m > [22m[2mUpdateManager Error Coordination[2m > [22m[2mshould broadcast masked error to ALL open windows
[22m[39m[UpdateManager] Periodic (and startup) update checks stopped
[UpdateManager] UpdateManager destroyed

 [32mâœ“[39m tests/coordinated/update-error.coordinated.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 18[2mms[22m[39m

[2m Test Files [22m [1m[32m52 passed[39m[22m[90m (52)[39m
[2m      Tests [22m [1m[32m775 passed[39m[22m[90m (775)[39m
[2m   Start at [22m 11:59:38
[2m   Duration [22m 13.49s[2m (transform 16.31s, setup 7.00s, import 29.51s, tests 13.64s, environment 108.71s)[22m

